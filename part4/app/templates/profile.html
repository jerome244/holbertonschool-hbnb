{% extends 'base.html' %}

{% block title %}Profile - HBnB{% endblock %}

{% block content %}
  <div class="profile-container">
    <!-- Profile Header Section -->
    <div class="profile-header">
      <div class="header-grid">
        <!-- Profile Picture Section -->
        <div class="profile-pic-section">
          {% if user.profile_pic %}
            <img src="{{ url_for('static', filename='uploads/' + user.profile_pic) }}" alt="Profile Picture" class="profile-pic-preview">
          {% else %}
            <img src="{{ url_for('static', filename='images/default-profile.png') }}" alt="Default Profile Picture" class="profile-pic-preview">
          {% endif %}
        </div>

        <!-- Bio Section -->
        <div class="bio-section">
          {% if user.bio %}
            <p><strong>Bio:</strong> {{ user.bio }}</p>
          {% else %}
            <p><strong>Bio:</strong> Not available</p>
          {% endif %}
        </div>
      </div>

      <!-- Pseudo Name -->
      <h2>{{ user.pseudo }}</h2>
    </div>

    <!-- Profile Information Form -->
    <form method="POST" enctype="multipart/form-data" class="profile-form">
      <div class="form-group">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" value="{{ user.email }}" readonly>
      </div>

      <div class="form-group">
        <label for="pseudo">Nickname (optional):</label>
        <input type="text" id="pseudo" name="pseudo" value="{{ user.pseudo or '' }}">
      </div>

      <div class="form-group">
        <label for="bio">Bio:</label>
        <textarea id="bio" name="bio" rows="4">{{ user.bio or '' }}</textarea>
      </div>

      <div class="form-group">
        <label for="profile_pic">Profile Picture:</label>
        <input type="file" id="profile_pic" name="profile_pic">
      </div>

      <!-- Button row for Save -->
      <div class="button-group">
        <button type="submit" class="save-button">Save Changes</button>
      </div>
    </form>

    <!-- Separate Delete Account Form -->
    <form method="POST" action="{{ url_for('auth.delete_account') }}" class="delete-account-form">
      <button type="submit" onclick="return confirm('Are you sure you want to delete your account? This action is irreversible.')">
        Delete Account
      </button>
    </form>
  </div>
{% endblock %}
